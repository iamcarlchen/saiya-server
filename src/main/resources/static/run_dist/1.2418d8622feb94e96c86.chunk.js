webpackJsonp([1],{2128:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default={name:"ty_index",components:{},props:{},data:function(){return{fields:[],fieldsBanner:{title:"",url:"http://"+document.location.host+"/#"+window._TY_Home,img:"",class:"wy-banner-left wy-banner-lg"},horizontal:"vertical",collapse:!1,userName:null,userInfo:null,buttonClass:"ty-icon_tuichu ty-font",colLeft:4,colRight:20,fieldsReady:null,toggleMenuIcon:"ty-icon_libiao ty-font",wyPageContainer:null,contentHeight:null,menuBackgroundHeight:null,menuBackgroundWidth:"160px",bannerButtonShow:!0,defaultOpeneds:[],parentPath:"",buzz:"",buzzExcuteOnlyOne:!1}},watch:{},computed:{key:function(){return void 0!==this.$route.name?this.$route.name+ +new Date:this.$route+ +new Date}},beforeCreate:function(){},created:function(){this.getUserInfo(),this.getResources(),this.setStyle(),this.setMinHeight()},updated:function updated(){var t=this;if(!t.buzzExcuteOnlyOne){t.buzzExcuteOnlyOne=!0;var menu=t.$refs.leftMenu;try{eval(t.buzz)}catch(e){console.log(e)}}},methods:{handleOpen:function(e,t){},handleClose:function(e,t){},goto:function(e){this.$router.push(e)},toggleMenu:function(){this.collapse=!this.collapse,this.buttonClass=this.collapse?"ty-icon_shezhi ty-font":"ty-icon_tuichu ty-font",this.colLeft=4==this.colLeft?2:4,this.colRight=20==this.colRight?22:20,this.updateMenu()},updateMenu:function(e){var t=this,n=t.fieldsReady;n&&(e?(n[0].icon="",n[0].img=t.userInfo&&t.userInfo.logo):n[0].icon&&"ty-icon_M ty-font"==n[0].icon?(n[0].icon="",n[0].img=t.userInfo&&t.userInfo.logo):(n[0].icon="ty-icon_M ty-font",n[0].img=""),n[0].class="wy-banner-left wy-banner-xs"==n[0].class?"wy-banner-left wy-banner-lg":"wy-banner-left wy-banner-xs",t.$set(t.fieldsReady,n),t.setMinHeight())},getValue:function(){},getUserInfo:function(){var e=this,t=localStorage.getItem("userInfo");if(t){var n=JSON.parse(t);e.userInfo=n,e.userName=n.user_name,setTimeout(function(){e.updateMenu(!0)},1e3)}else{var o="local"==_TY_ENV.name?"/read-session-user-info":"/ty-read-session-user-info";_TY_Tool.get(_TY_ContentPath+o).then(function(t){var n=t.data.data;e.userInfo={},e.userInfo.user_id=n.id,e.userInfo.user_name=n.name,e.userInfo.market_id=n.marketId,e.userInfo.market_name=n.marketDesc,e.userInfo.logo=n.logo,e.userInfo.tenantSerialNumber=n.tenantSerialNumber,e.userName=n.name,localStorage.setItem("userInfo",JSON.stringify(e.userInfo)),e.updateMenu(!0)}).catch(function(e){})}},getResources:function(){var e=this,t="local"==_TY_ENV.name?"/ty/resources/"+e.$route.params.appAlias:_TY_ContentPath+"/load_app_resources?appAlias="+e.$route.params.appAlias;e.$route.path.indexOf("b_index")>=0&&"local"!=_TY_ENV.name&&(t=_TY_ContentPath+"/load_bapp_resources?appAlias="+e.$route.params.appAlias),_TY_Tool.get(t).then(function(t){var n=t.data;if(n.ok){var o=n.data.pages||n.data.pages2;(o=o||{}).list&&(o=o.list),e.fieldsReady=[],e.fieldsReady.splice(0,0,e.fieldsBanner),e.buildTreeMenu(e,o,0).forEach(function(t,n){e.fieldsReady.splice(n+1,0,t)}),n.data.buzz&&(e.buzz=n.data.buzz)}else e.$message.error(n.message)},function(e){})},buildTreeMenu:function(e,t,n){var o=e||this,a=[];o.parentPath=o.$route.matched[0].path.replace(":appAlias",o.$route.params.appAlias);for(var s=0;s<t.length;s++){var i=t[s];if("sub"!=i.type){var r={};if(r.title=i.name,"category"==i.type?(r.url=i.alias,o.defaultOpeneds.includes(i.alias)||o.defaultOpeneds.push(i.alias)):r.url=o.parentPath+"/"+i.alias,i.icon&&(r.icon=i.icon+" ty-font"),i.parentId==n){var l=o.buildTreeMenu(o,t,i.id);l&&l.length>0&&(r.children=l),a.push(r)}}}return a},logout:function(){_TY_Tool.post("/config/logout").then(function(e){localStorage.removeItem("userInfo"),window.location.reload()},function(e){window.location.reload()})},handleCommand:function(e){"logout"==e&&this.logout()},setStyle:function(){this.wyPageContainer="wy-content-height"},menuClick:function(){this.setStyle()},setMinHeight:function(){this.contentHeight=window.screen.availHeight-50-65+"px",this.menuBackgroundHeight=window.screen.availHeight-65+"px",this.menuBackgroundWidth=this.collapse?"64px":"160px"}}}},2152:function(e,t){},2186:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wy"},[n("el-row",{staticClass:"content-box wy-container",attrs:{type:"flex",justify:"center"}},[n("el-col",{staticClass:"wy-container-left"},[n("div",{staticClass:"wy-bannerBg",attrs:{id:"wy-dialog"}}),e._v(" "),n("div",{staticClass:"wy-menu-container",style:{width:e.menuBackgroundWidth}},[n("bb-menu",{ref:"leftMenu",staticClass:"el-menu-vertical wy-menu",attrs:{fields:e.fieldsReady,collapse:e.collapse,horizontal:e.horizontal,defaultOpeneds:e.defaultOpeneds},on:{click:e.menuClick}})],1)]),e._v(" "),n("el-col",{staticClass:"wy-container-right wy-container-height",attrs:{id:"wy-container-right"}},[n("div",[n("div",{staticClass:"wy-banner"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.bannerButtonShow,expression:"bannerButtonShow"}],staticClass:"wy-toggleMenu",attrs:{type:"text",icon:e.toggleMenuIcon},on:{click:e.toggleMenu}}),e._v(" "),n("el-dropdown",{staticClass:"wy-logout",attrs:{trigger:"click"},on:{command:e.handleCommand}},[n("span",{staticClass:"dropdown-link"},[e._v("\n                                    "+e._s(e.userName)),n("i",{staticClass:"el-icon-caret-bottom el-icon-right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:"logout"}},[e._v("退出")])],1)],1)],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{staticClass:"wy-content",attrs:{id:"ty-content"}},[n("router-view",{key:e.key,class:e.wyPageContainer}),e._v(" "),n("div",{staticClass:"wy-bottom"},[n("p",[e._v("如果您在使用系统过程中有任何帮助需要，请联系IT服务台  热线电话: 400-9200-555  服务邮箱: helpdesk@chinaredstar.com")]),e._v(" "),n("p",[e._v("© Copyright 2017 by China Redstar Co, Ltd . All right reserved")])])],1)])],1)])],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},347:function(e,t,n){n(2152);var o=n(0)(n(2128),n(2186),null,null);o.options.__file="/Users/xiaobc/work/ty/ty-client-core/run/src/platform/index.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] index.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports}});